# Ch.04 CPU 스케쥴링

## 1. 스케줄링의 개요

: 스케줄링은 여러 프로세스의 상황을 고려하여 CPU와 시스템 자원을 어떻게 배정할지 결정하는 일을 말한다. -> CPU 스케줄러가 해당 작업의 관리를 한다.
스케쥴링의 목적은 모든 프로세스가 공평하게 작업하도록 하는 것이다.

- 스케줄링의 단계
  - 작업 대기
  - 보류 프로세스
  - 활성 프로세스
  - 실행 프로세스
  - 작업 종료

## 2. 스케줄링 시 고려 사항

- 선점형 스케줄링
  : 어떤 프로세스가 CPU를 할당받아 실행중이더라도 스케줄러가 CPU를 강제로 뺏을 수 있는 스케줄러 방식이다. (ex: 인터럽트 처리)
- 비선점형 스케줄링
  : 어떤 프로세스가 CPU를 점유하면 작업을 완료할 댸까지 다른 프로세스가 CPU를 뺏을 수 없는 스케줄링 방식으로 과거의 일괄 작업 시스템에서 사용했다.

- 프로세스 우선 순위
  - 높은 우선순위
    : 커널 프로세스, 전면 프로세스, 대화형 프로세스, 입출력 집중 프로세스
  - 낮은 우선순위
    : 사용자 프로세스, 후면 프로세스, 일괄작업 프로세스, CPU 집중 프로세스

## 3. 다중 큐

- 준비 상태의 다중 큐
- 대기 상태의 다중 큐

## 4. 스케줄링 알고리즘

- 선입 선출(FCFS) (비선점형 알고리즘)
  : 먼저 들어온 작업에 먼저 CPU를 할단한다.

- 최다 작업 우선(SJF) (비선점형 알고리즘)
  : 실행 시간이 짧은 작업부터 CPU를 할당한다.

- 최고 응답률 우선(HRN) (비선점형 알고리즘)
  : 알고리즘 작업 시간과 기다린 시간을 혼합하여 CPU를 할당한다.

- 라운드 로빈(RR) (선점형 알고리즘)
  : 선점형 알고리즘 중 우선 순위가 적용되지 않는 가장 단순하고 대표적인 알고리즘

- 최소 잔류 시간 우선(SRT) (선점형 알고리즘)
  : 기본적으로 라운드 로빈 스케줄링을 사용하지만 CPU를 할당받을 프로세스를 선택하라 때 남아 있는 작업시간이 가장 적은 프로세스를 선택하는 알고리즘

- 우선 순위
  : 우선순위가 높은 프로세스부터 CPU를 할당한다. 선점형과 비선점형 방식에 모두 적용할 수 있는 알고리즘이다.

- 다단계 큐(MLQ) (선점형 알고리즘)
  : 우선순위에 따라 여러개의 큐를 사용하는 알고리즘 중 고정 우선순위 방식

- 다단계 피드백 큐(MLFQ) (선점형 알고리즘)
  : 우선순위에 따라 여러개의 큐를 사용하고 한 번 CPU를 잡은 프로세스의 우선순위를 떨어뜨린다. 각 큐의 타임 슬라이스 크기가 다른 변동 우선순위 알고리즘 이다.

## 5. 인터럽트 처리

: 프로그램이 실행되고 있을 때 외부의 어떤 변화에 의하여 그 프로그램의 실행이 정지되고, 변화에 대응하는 다른 프로그램이 먼저 실행되는 일을 말하며, 인터럽트 처리는 입출력뿐 아니라 시스템 보호에 매우중요한 역할을 한다. 

각각의 인터럽트에는 고유번호(윈도우에서는 IRQ라고 함)를 가지고 있고, 그 번호에 붙어져 있는 함수(인터럽트 핸들러)의 쌍으로 이루어져 있다.

- 인터럽트 벡터
  : 인터럽트가 한순간에 여러개가 동시에 발생할 수 있는데, 이렇게 동시에 발생하는 인터럽트를 하나로 묶어서 처리하는 개념.
  인터럽트와 인터럽트 핸들러를 일대일로 연결한 자료구조

- 인터럽트 분류
  - 동기적 인터럽트(사용자 인터럽트)
    : 프로세스가 실행 중인 명령어로 인해 발생
    
    ex) 다른 사용자의 메모리 영역에 접근하는 경우(프로그램의 문제)
    컴퓨터 작업자가 의도적으로 프로세스를 중단하기 위해 발생시킨 인터럽트
    입출력 장치 같은 주변장치의 조작에 의한 인터럽트
    산술 연산 중 발생하는 인터럽트

  - 비동기적 인터럽트
    : 실행중인 명령어와 무관하게 발생
    
    ex) 하드디스크 읽기 오류, 메모리 불량
    
- 인터럽트와 이중모드
  : 운영 체제가 두 모드(커널모드, 사용자모드)를 전환하며 일 처리를 하는 것을 이중모드라고 한다. (운영체제가 자원을 보호하기위해 사용하는 기법)
