# Ch.10 입출력 시스템과 저장장치

## 01. 입출력 시스템

컴퓨터는 필수장치인 CPU와 메모리, 주변장치인 입출력장치와 저장장치로 구성되며, 각 장치는 메인보드에 있는 버스로 연결된다.

- 입출력 제어기
  : 입출력 장치와 주기억 장치 사이의 자료 경로를 제공하는 독립된 처리기

  - 여러 채널에 연결된 주변 장치로부터 전송된 데이터를 적절히 배분하여 하나의 데이터 흐름을 만든다.
  - 이때 "채널 선택기"는 여러 채널에서 전송된 데이터 중 어떤것을 메모리로 보낼지 결정한다.
  - 주변 장치에서 전송된 데이터는 DMA 제어기를 거쳐 메모리에 올라간다.
  - CPU가 작업하는 공간과 DMA 제어기가 데이터를 옮기는 공간을 분리하여 메인메모리를 운영한다.
    (메인메모리의 주소 공간 중 일부를 DMA 제어기에 할당하여 작업 공간이 겹치는 것을 막는다.)

  <장점>
  : 느린 입출력 장치로 인해 CPU와 메모리의 작업이 느려지는 것을 막을 수 있어 작업 효율이 향상된다.

<단점>
: 저속 주변장치 때문에 고속 주변 장치의 데이터 전송이 느려지는 문제가 있다.
(고속 입출력 버스, 저속 입출력 버스)

\*\* 결론적으로 현대의 컴퓨터는 CPU와 메모리를 연결하는 메인버스, CPU와 그래픽 카드를 연결하는 그래픽 버스, 고속 주변장치를 연결하는 고속 입출력 버스, 저속 주변장치를 연결하는 저속 입출력 버스를 사용한다.

\*\* 하나의 버스채널은 주소 버스, 데이터 버스, 제어 버스로 구성된다.

- 인터럽트
  : 주변장치의 입출력 요구나 하드웨어의 이상 현상을 CPU에 알려주는 신호다.

  - 각 장치에는 IRQ라는 고유의 인터럽트 번호가 부여된다.

- 인터럽트 핸들러
  : 인터럽트의 처리 방법을 함수 형태로 만들어놓은 것이다.

- 버퍼
  : 속도가 다른 두 장치의 속도 차이를 완화하는 역할을 한다.

## 02. 저장장치

- 하드디스크
  : 원반을 사용한 저장장치로, 맨 앞에 있는 데이터나 맨 뒤에 있는 데이터에 접근하는 속도가 거의 비슷하다. 스핀들 이라는 원통 축에 여러개의 플래터가 달려 있다. 구조상 외부 충격에 민감하다.

  - 플래터
    : 표면에 자성페가 발려있어 자기를 이용하여 0과 1의 데이터를 저장할 수 있다.
  - 섹터와 블록(클러스터)
    : 섹터는 하드디스크의 가장 작은 저장단위이다. 블록은 하드디스크와 컴퓨터 사이에 데이터를 전송하는 논리적인 저장단위 중 가장 작은 단위이다.
  - 트랙과 실린더
    : 트랙은 플래터에서 회전축을 중심으로 데이터가 기록되는 동일한 동심원상에 있는 섹터의 집합을 말한다. 여러개의 플래터에 있는 같은 트랙의 집합을 실린더 라고 한다.
  - 헤드와 플래터
    : 헤드의 수는 데이터가 저장되는 플래터의 표면 수와 같다.

- SSD
  : 하드디스크의 느린 속도를 대처하기 위해 개발된 보조저장치다. SSD는 전원이 사라져도 데이터를 보관할 수 있는 플래시 메모리로 구성된다.

\*\* 하드디스크와 SSD는 모두 단편화 현상이 발생한다.
하드디스크의 경우 조각이 많이 발생하면 큰 덩어리의 데이터를 읽을 때 헤드가 여러곳을 돌아다녀야 하므로 속도가 느려진다. => 주기적으로 조각모음 실시
SSD의 경우 메모리를 사용하기 때문에 데이터가 어디에 저장되어 있든 읽거나 쓰는 속도에는 차이가 거의 없다. (SSD에서는 단편화가 데이터 접근 속도에 영향을 미치지 않기 때문에 조각 모음이 필요없다. => 메모리는 최대 사용횟수가 정해져 있으므로 오히려 조각 모음을 하지 않는 편이 좋다.)

- CD
  : 하드디스크처럼 원반을 사용하는 저장장치로 휴대할 수 있는 소형 원반에 데이터를 저장한다. (트랙과 섹터로 구성되어있다.)
  - 각속도 일정 방식의 회전
    : 하드디스크의 플래터는 항상 일정한 속도록 회전하여 바깥쪽 트랙의 속도가 안쪽 트랙의 속도보다 훨씬 빠르다. (ex: 하드디스크)
  - 선속도 일정 방식의 회전
    : CD에서 사용하는 선속도 일정 방식의 경우 어느 트랙에서나 단위 시간당 디스크의 이동거리가 같다. (ex: CD)

\*\* 데이터 전송시간 = 탐색시간(디스크 데이터 전송 시간 중 가장 많은 비중) + 회전 지연 시간 + 전송 시간

## 03. 디스크 스케쥴링

- FCFS 디스크 스케쥴링
  : 가장 단순한 디스크 스케쥴링 방식으로, 요청이 들어온 트랙 순서대로 서비스 한다.

- SSTF 디스크 스케쥴링
  : 현재 헤드가 있는 위치에서 가장 가까운 트랙부터 서비스한다. 만약 다음에 서비스할 두 트랙의 거리가 같다면 먼저 요청받은 트랙을 서비스한다. 효율성이 좋지만 아사 현상을 일으킬 수 있다. (헤드가 중간에 위치하며 가장 안쪽이나 가장 바깥쪽에 있는 트랙을 서비스할 확률이 낮아지가 때문이다.)

- 블록 SSTF 디스크 스케쥴링
  : SSTF 디스크 스케쥴링의 공평성 위배를 어느 정도 해결한 방법으로 큐에 있는 요청을 일정한 블록 형태로 묶는다. 현재 트랙에서 가장 먼 트랙을 블록의 끝으로 이동한다. 모든 트랙이 블록 안에서만 움직인다.

- SCAN 디스크 스케쥴링
  : SSTF 디스크 스케쥴링의 공평성 위배 문제를 완화하기 위해 만들어진 기법이다. 헤드가 한 방향으로만 움직이면서 서비스한다.

- C-SCAN 디스크 스케쥴링
  : SCAN 기법을 변형한 것으로, 헤드가 한쪽 방향으로 움직일 때는 요청받은 트랙을 서비스하고 반대 방향으로 돌아올 때는 서비스 하지 않는다.

- LOOK 디스크 스케쥴링
  : 더 이상 서비스 할 트랙이 없으면 헤드가 끝까지 가지 않고 중간에서 방향을 바꾼다.

- C-LOOK 디스크 스케쥴링
  : C-SCAN 디스크 스케쥴링의 LOOK 버전이다.

- SLTF 디스크 스케쥴링 (최소 지연 우선 기법)
  : 대부분의 하드디스크는 트랙을 따라 움직이는 헤드를 가지고 있다. 하지만 드럼을 사용하는 일부 하드디스크의 경우 헤드 지지대를 고정하고, 모든 트랙을 읽을 수 있는 여러 개의 헤드를 지지대에 부착한다. 이경우 헤드를 움직이는 탐색 시간이 없어 매우 빠르게 데이터를 주고 받을 수 있는데, 이렇게 헤드가 고정된 저장장치에 적용되는 것이 SLTF 디스크 스케줄링이다.

## 04. RAID

: 자동으로 백업을 하고 장애가 발생하면 이를 복구하는 시스템으로 '레이드'라고 읽는다.

- RAID 0 (스트라이핑)
  : 병렬로 연결된 여러 개의 디스크에 데이터를 동시에 입출력할 수 있도록 구성된다.
  장애 발생시 복구하는 기능이 없기 에 장애가 발생하면 데이터를 잃는다.

- RAID 1 (미러링)
  : 하나의 데이터를 2개의 디스크에 나누어 저장하여 장애 시 백업 디스크로 활용한다.
  저장하는 데이터와 같은 디스크가 하나 더 필요하기 때문에 비용이 증가하며, 같은 내용을 두번 저장하기 때문에 속도가 느려질 수 있다.

- RAID 2
  : 오류를 검출하는 기능이 없는 디스크에 오류 교정 코드 ECC를 따로 관리 하고, 오류가 발생하면 이 코드를 이용하여 디스크를 복구한다.

- RAID 3
  : 오류 검출 코드인 패리티 비트를 사용하여 데이터를 복구한다. 처리하는 데이터가 섹터 단위로 되어있다. 데이터를 읽거나 쓸때 모든 디스크가 동시에 동작해야 한다는 단점이 있다.

- RAID 4
  : 오류 검출 코드인 패리티 비트를 사용하여 데이터를 복구한다. 처리하는 데이터가 블록 단위로 되어 있다. 데이터를 읽거나 쓸때 데이터가 저장되는 디스크와 패리티 비트가 저장되는 디스크만 동작한다. (데이터 병목 현상)

- RAID 5
  : RAID 4와 같은 방법을 사용하지만 병목 현상을 해결한 기법이다. 한 디스크에 장애가 발생하면 다른 디스크에 있는 패리티 비트를 이용하여 데이터를 복구할 수 있다.

- RAID 6
  : RAID 5와 같은 방법을 사용하지만 패리티 비트가 2개여서 디스크 2개의 장애를 복구할 수 있다.

- RAID 10
  : 빠른 입출력이 장점인 RAID 0과 복구 기능이 있는 RAID 1을 결합한 RAID 10 이 등장 하였다. 디스크를 2개씩 묶어 RAID 1로 구성하고, RAID 1로 묶인 디스크를 RAID 0으로 다시 묶는다. 병렬로 데이터를 처리하여 입출력 속도를 높일 수 있다. 장애가 발생했을때 이를 복구하려면 일부 디스크만 중단하면된다.

## 05. 하드웨어의 규격과 발전

: 버스에 장치를 접속하여 사용하려면 포트가 필요하다.

<메인보드의 포트>

- CPU포트
- 램포트
- 그래픽포트
- SATA
  : 하드디스크 같은 저장장치를 연결하는 직렬 ATA 포트다.
- PCI

<직렬포트와 병렬포트>

<USB 포트>
: 직렬 포트와 병렬포트 등 기존의 다양한 연결 방식을 대체하기 위해 만든 포트

<포트 연결 단자>

- USB
- SATA
- D-SUB
- DVI
- HDMI

\*\* GPU는 그래픽 계산을 병렬로 처리하도록 설계되어있어 실수 계산 능력이 탁월하다.
